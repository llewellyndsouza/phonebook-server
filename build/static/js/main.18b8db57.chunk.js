(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(2),c=n(14),s=n.n(c),r=(n(19),n(3)),i=n(0),u=function(e){var t=e.newFilter,n=e.setNewFilter;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Filter"}),"filter shown with"," ",Object(i.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},a=n(4),l=n.n(a),d="/api/persons",f=function(){return l.a.get(d).then((function(e){return e.data}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},b=function(e,t){return console.log(e,t),l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},m=function(e){return console.log("deleting number",e),l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},h=function(e){var t=Object(r.a)(e.tools,7),n=t[0],o=t[1],c=t[2],s=t[3],u=t[4],a=t[5],l=t[6];return Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t,r={name:c,number:u};t=n.find((function(e){return e.name===c})),console.log(t),t?window.confirm("The name ".concat(c," already exists. WOuld you like to replace the old number with a new one?"))&&b(t.id,r).then((function(e){o(n.map((function(n){return n.id!==t.id?n:e}))),l({message:"Added ".concat(c),type:"info"}),setTimeout((function(){l({message:null,type:null})}),5e3)})).catch((function(e){l({message:"".concat(c," has already been removed from server"),type:"error"}),setTimeout((function(){l({message:null,type:null})}),5e3)})):j(r).then((function(e){o(n.concat(e)),l({message:"Added ".concat(c),type:"success"}),setTimeout((function(){l({message:null,type:null})}),5e3)})).catch((function(e){console.log(e.response),l({message:"".concat(e.response.data.error),type:"error"}),setTimeout((function(){l({message:null,type:null})}),5e3)})),s(""),a("")},children:[Object(i.jsxs)("div",{children:["name:"," ",Object(i.jsx)("input",{value:c,onChange:function(e){s(e.target.value)}})]}),Object(i.jsxs)("div",{children:["number:"," ",Object(i.jsx)("input",{value:u,onChange:function(e){a(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.id,n=e.persons,o=e.setPersons,c=e.setNotification;return Object(i.jsx)("button",{onClick:function(){window.confirm("are you sure?")&&m(t).then((function(e){console.log(e),c({message:"".concat(n.find((function(e){return e.id===t})).name," deleted on server"),type:"info"}),setTimeout((function(){c({message:null,type:null})}),5e3),o(n.filter((function(e){return e.id!==t})))})).catch((function(e){c({message:"".concat(n.find((function(e){return e.id===t})).name," already deleted on server"),type:"error"}),setTimeout((function(){c({message:null,type:null})}),5e3),o(n.filter((function(e){return e.id!==t})))}))},children:"delete"})},O=function(e){var t=e.persons,n=e.setPersons,o=e.filter,c=e.setNotification,s="";return s=""===o?t.map((function(e){return Object(i.jsxs)("p",{children:[e.name," : ",e.number," ",Object(i.jsx)(p,{id:e.id,persons:t,setPersons:n,setNotification:c})]},e.name)})):(s=t.filter((function(e){var t=e.name;e.number;return!!t.toLowerCase().includes(o.toLowerCase())}))).map((function(e){return Object(i.jsxs)("p",{children:[e.name," : ",e.number," ",Object(i.jsx)(p,{id:e.id,persons:t,setPersons:n,setNotification:c})]},e.name)})),Object(i.jsx)("div",{children:s})},g=function(e){var t=e.notification;return t.type?Object(i.jsx)("div",{className:"alert "+t.type,children:t.message}):Object(i.jsx)("div",{})},v=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(o.useState)(""),a=Object(r.a)(s,2),l=a[0],d=a[1],j=Object(o.useState)(""),b=Object(r.a)(j,2),m=b[0],p=b[1],v=Object(o.useState)(""),x=Object(r.a)(v,2),y=x[0],w=x[1],N=Object(o.useState)({message:null,type:null}),k=Object(r.a)(N,2),T=k[0],C=k[1];return Object(o.useEffect)((function(){f().then((function(e){console.log(e),c(e)}))}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(g,{notification:T}),Object(i.jsx)(u,{newFilter:y,setNewFilter:w}),Object(i.jsx)("h2",{children:"Add a new"}),Object(i.jsx)(h,{tools:[n,c,l,d,m,p,C]}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(O,{persons:n,setPersons:c,filter:y,setNotification:C})]})};s.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.18b8db57.chunk.js.map