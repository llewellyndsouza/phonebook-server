(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(14),i=n.n(o),r=(n(19),n(3)),s=n(0),u=function(e){var t=e.newFilter,n=e.setNewFilter;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Filter"}),"filter shown with"," ",Object(s.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},a=n(4),l=n.n(a),d="/api/persons",j=function(){return l.a.get(d).then((function(e){return e.data}))},f=function(e){return l.a.post(d,e).then((function(e){return e.data}))},b=function(e,t){return console.log(e,t),l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return console.log("deleting number",e),l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m=function(e){var t=Object(r.a)(e.tools,7),n=t[0],c=t[1],o=t[2],i=t[3],u=t[4],a=t[5],l=t[6];return Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t,r={name:o,number:u};t=n.find((function(e){return e.name===o})),console.log(t),t?window.confirm("The name ".concat(o," already exists. WOuld you like to replace the old number with a new one?"))&&b(t.id,r).then((function(e){c(n.map((function(n){return n.id!==t.id?n:e}))),l({message:"Added ".concat(o),type:"info"}),setTimeout((function(){l({message:null,type:null})}),5e3)})).catch((function(e){l({message:"".concat(o," has already been removed from server"),type:"error"}),setTimeout((function(){l({message:null,type:null})}),5e3)})):f(r).then((function(e){c(n.concat(e)),l({message:"Added ".concat(o),type:"success"}),setTimeout((function(){l({message:null,type:null})}),5e3)})),i(""),a("")},children:[Object(s.jsxs)("div",{children:["name:"," ",Object(s.jsx)("input",{value:o,onChange:function(e){i(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number:"," ",Object(s.jsx)("input",{value:u,onChange:function(e){a(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.id,n=e.persons,c=e.setPersons,o=e.setNotification;return Object(s.jsx)("button",{onClick:function(){window.confirm("are you sure?")&&h(t).then((function(e){console.log(e),c(n.filter((function(e){return e.id!==t})))})).catch((function(e){o({message:"".concat(n.find((function(e){return e.id===t})).name," already deleted on server"),type:"error"}),c(n.filter((function(e){return e.id!==t}))),setTimeout((function(){o({message:null,type:null})}),5e3)}))},children:"delete"})},p=function(e){var t=e.persons,n=e.setPersons,c=e.filter,o=e.setNotification,i="";return i=""===c?t.map((function(e){return Object(s.jsxs)("p",{children:[e.name," : ",e.number," ",Object(s.jsx)(O,{id:e.id,persons:t,setPersons:n,setNotification:o})]},e.name)})):(i=t.filter((function(e){var t=e.name;e.number;return!!t.toLowerCase().includes(c.toLowerCase())}))).map((function(e){return Object(s.jsxs)("p",{children:[e.name," : ",e.number," ",Object(s.jsx)(O,{id:e.id,persons:t,setPersons:n,setNotification:o})]},e.name)})),Object(s.jsx)("div",{children:i})},x=function(e){var t=e.notification;return t.type?Object(s.jsx)("div",{className:"alert "+t.type,children:t.message}):Object(s.jsx)("div",{})},v=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(""),a=Object(r.a)(i,2),l=a[0],d=a[1],f=Object(c.useState)(""),b=Object(r.a)(f,2),h=b[0],O=b[1],v=Object(c.useState)(""),g=Object(r.a)(v,2),y=g[0],w=g[1],N=Object(c.useState)({message:null,type:null}),k=Object(r.a)(N,2),C=k[0],P=k[1];return Object(c.useEffect)((function(){j().then((function(e){console.log(e),o(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(x,{notification:C}),Object(s.jsx)(u,{newFilter:y,setNewFilter:w}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(m,{tools:[n,o,l,d,h,O,P]}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(p,{persons:n,setPersons:o,filter:y,setNotification:P})]})};i.a.render(Object(s.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.97a967e1.chunk.js.map